var qChanged=!1,qSelected=!1,city="",base_url="";function setDefultDate(){from=new Date,from.setDate(from.getDate()+2),to=new Date,to.setDate(to.getDate()+3),$("#dateRangePicker").val(moment(from).locale("fa").format("jYYYY/jMM/jDD")),$("#dateRangePickerEnd").val(moment(to).locale("fa").format("jYYYY/jMM/jDD"))}function datePicker(){var t="jYYYY/jMM/jDD",e=void 0,o=void 0;$("#dateRangePicker").daterangepicker({clearLabel:"Clear",autoUpdateInput:!1,minDate:moment(),autoApply:!0,opens:"left",locale:{separator:" - ",format:t},startDate:e,endDate:o,jalaali:!0,showDropdowns:!0}).on("apply.daterangepicker",function(e,o){o.endDate.diff(o.startDate,"days")>0?($(this).val(o.startDate.format(t)),$("#dateRangePickerEnd").val(o.endDate.format(t))):$(this).val("")})}function param(t){var e,o,a=decodeURIComponent(window.location.search.substring(1)).split("&");for(o=0;o<a.length;o++)if((e=a[o].split("="))[0]===t)return void 0===e[1]||e[1]}function autocomplete(){element=document.getElementById("autocomplete-position");var t=$("#autocomplete-position").offset().top-$("#position-fixer").offset().top,e=element.getBoundingClientRect(),o=element.offsetWidth;$(".autocomplete-suggestions").css("top",t).css("left",e.left).css("width",o).css("display","block")}$("body").on("mouseenter",".autocomplete-suggestion",function(){$(this).css("background-color","#e4e6e8"),$(this).css("cursor","pointer")}),$("body").on("mouseleave",".autocomplete-suggestion",function(){$(this).css("background-color","white"),$(this).css("cursor","pointer")}),$("body").on("click",".autocomplete-suggestion",function(){qSelected=!0,qChanged=!1,$("#q").val($(this).find("strong").text()),$("#cityId").val($(this).attr("id")),$(".autocomplete-suggestions").children().remove()}),$(".closebtn").click(function(){var t=this.parentElement;t.style.opacity="0",setTimeout(function(){t.style.display="none"},10)}),$("form").submit(function(t){return""==$("#q").val()?($(".alert").css("display","block"),$(".alert").css("opacity","1"),!1):(param("city")&&$("#cityId").val(param("city")),qChanged&&!qSelected&&($("#q").val($(".autocomplete-suggestions").children().first(".autocomplete-suggestion").find("strong").text()),$("#cityId").val($(".autocomplete-suggestions").children().first(".autocomplete-suggestion").attr("id"))),!0)}),$("#q").keydown(function(){$(".alert").css("display","none"),$(".alert").css("opacity","1"),$.ajax({url:base_url+"/api/city",data:{term:$("#q").val()},success:function(t){$(".autocomplete-suggestions").children().remove(),t.forEach(function(t){$(".autocomplete-suggestions").append(' <div id="'+t.city+'" class="autocomplete-suggestion"><p><strong>'+t.name+'</strong></p><small><span class="location">'+t.province+'</span><span class="type">'+t.type+"</span></small></div>")}),qChanged=!0,qSelected=!1}})});