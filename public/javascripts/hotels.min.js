var i=0,base_url="";function slideRight(){$("#detail-hero .swiper-slide").removeClass("swiper-slide-active"),$("#detail-hero-thumbnail .swiper-slide").removeClass("active-thumbnail");var e=$("#detail-hero .swiper-slide").last();e.remove(),$("#topSlides").prepend(e),$("#detail-hero .swiper-slide:nth-child(1)").addClass("swiper-slide-active");var t=$("#detail-hero .swiper-slide:nth-child(1)").attr("id");$("#detail-hero-thumbnail #"+t).addClass("active-thumbnail")}$(document).ready(function(){var e="",t="",i=0,a="hotel",s=0,r=1;function l(l,n){""==e&&(e=param("q")),""==t&&(t=param("city")),param("q")!=param("city")&&$(".partition").css("display","block"),$.ajax({url:base_url+"/api/search",type:"POST",data:{q:e,city:t,from:param("from"),to:param("to"),guest:param("na"),rooms:param("nr"),sort:$("#hotel-sort").val(),page:r,star:i,type:a,range:s},success:function(e){if(e){var t=$("#cartId").html(),i=$("#dealId").html(),a=$("#OTAId").html();!function(e){$(".search-summary strong").text(""),$(".search-summary strong").append(e.result_num),$(".search-summary em").text(""),$(".search-summary em").append($("#hotel-sort option:selected").text()),$(".pagination-summary em").text(""),$(".pagination-summary em").append(e.query.sort),$(".hotel-criteria-destination").text(""),$(".hotel-criteria-destination").append(e.query.city),$(".check-in").text(""),$(".check-in").append(e.query.from),$(".check-out").text(""),$(".check-out").append(e.query.to),$("#guests").text(""),$("#guests").append(e.query.guest+" نفر "),$("#rooms").text(""),$("#rooms").append(e.query.rooms+" اتاق "),$(".hbox").children().remove();for(var t=1;t<=Math.ceil(e.result_num/10);t++)t==r?$(".hbox").append('<li><button class="selected" data-page="'+t+'">'+t+"</button></li>"):$(".hbox").append('<li><button data-page="'+t+'">'+t+"</button></li>")}(e),$("#results").children().remove(),e.hotel_result.forEach(function(e){var s=Mustache.render(t,e),r=Mustache.render(i,e);$("#results").append(s),hotelId="#"+e.hotel_id,e.internet&&$(hotelId+"amenity").append('<span class="hotel_policy hotel_policy_wifi" data-icon="Internet_white before">Wi-Fi</span>'),e.parking&&$(hotelId+"amenity").append('<span class="hotel_policy hotel_policy_parking" data-icon="Parking_positive before">Parking</span>');for(var l=0;l<e.stars;l++)$(hotelId+"stars").append('<span style="font-size:100%;color:Orange;">&starf;</span>');$(hotelId).append(r),e.ota_results.forEach(function(t){t.hotel_id=e.hotel_id;var i=Mustache.render(a,t);$(hotelId+"ota").append(i),t.price_info.rooms.forEach(function(e){$(hotelId+t.ota.id).append('<div class="room_type">'+e+"</div>")})})})}else $("#results").children().remove(),$("#myModal").css("display","block")}})}datePicker(),l(),$("#results").on("click",".cpa__hotel-card__main-cta",function(){if("downBlue before"==$(this).children().first().attr("data-icon")){$(this).children().first().find(".expand_details").addClass("hidden"),$(this).children().first().attr("data-icon","upBlue before"),$(this).children().first().find(".collapse_details").removeClass("hidden");var e="#"+$(this).children().first().attr("data-hotel")+"deals";$(e).css("display","block")}else{$(this).children().first().find(".collapse_details").addClass("hidden"),$(this).children().first().attr("data-icon","downBlue before"),$(this).children().first().find(".expand_details").removeClass("hidden");e="#"+$(this).children().first().attr("data-hotel")+"deals";$(e).css("display","none")}}),$("#results").on("click",".cpa-hotel-inline-hide-details",function(){$(".cpa__hotel-card__main-cta").trigger("click")}),$("#results").on("click",".hotel-inline-tab",function(){var e={};$(this).siblings().removeClass("tab-selected"),$(this).addClass("tab-selected");var t=$(this).attr("data-elem"),i=$(this).attr("data-hotel-id");if($(this).parent().siblings(".hotel-inline-item").css("display","none"),"prices"==t&&$(this).parent().siblings(".hotel-inline-prices").css("display","block"),"desc"==t&&$(this).parent().siblings(".hotel-inline-desc").css("display","block"),"location"==t){if($("#"+i+"figure").children().length<2){e.lat=$(this).attr("data-lat"),e.lang=$(this).attr("data-lang");var a=$("#locationId").html(),s=Mustache.render(a,e);$("#"+i+"figure").prepend(s)}$(this).parent().siblings(".hotel-inline-location").css("display","block")}"facilities"==t&&$(this).parent().siblings(".hotel-inline-facilities").css("display","block")}),$("#results").on("click",".hotel-thumbnail",function(){$("head").append($('<link rel="stylesheet" id="cssLTR" type="text/css" />').attr("href","/Styles/search-results-ltr.css"));var e=$(this).parent().parent().attr("id"),t=$("#imageSlideContainerId").html(),i=$("#imageTopSlideId").html(),a=$("#imagebelowSildeId").html();$.ajax({url:base_url+"/api/images",method:"POST",data:{id:e},success:function(e){$("#cssRTL").attr("disabled","disabled");var s=Mustache.render(t);$("#imageContainer").append(s);e.length;e.forEach(function(e,t){e.index=t;var s=Mustache.render(i,e),r=Mustache.render(a,e);$("#topSlides").append(s),$("#belowSlides").append(r)}),$("#detail-hero .swiper-slide:nth-child(1)").addClass("swiper-slide-active"),$("#detail-hero-thumbnail .swiper-slide:nth-child(1)").addClass("active-thumbnail")}})}),$("#results").on("click",".hotel-geo",function(){$(this).parent().parent().parent().find(".cpa__hotel-card__main-cta").trigger("click"),$(this).parent().parent().parent().parent().parent().parent().parent().find(".mapClass").trigger("click")}),$("body").on("click",".close",function(){$("#imageContainer").children().remove(),$("#cssRTL").removeAttr("disabled"),$("#cssLTR").remove()}),$("body").on("click","#arrow-right-hero",function(){$("#detail-hero .swiper-slide").removeClass("swiper-slide-active"),$("#detail-hero-thumbnail .swiper-slide").removeClass("active-thumbnail");var e=$("#detail-hero .swiper-slide:nth-child(1)");e.remove(),$("#topSlides").append(e),$("#detail-hero .swiper-slide:nth-child(1)").addClass("swiper-slide-active");var t=$("#detail-hero .swiper-slide:nth-child(1)").attr("id");$("#detail-hero-thumbnail #"+t).addClass("active-thumbnail")}),$("body").on("click","#arrow-left-hero",function(){slideRight()}),$("body").on("click","#arrow-right",function(){for(var e=0;e<10;e++){var t=$("#detail-hero-thumbnail .swiper-slide:nth-child(1)");t.remove(),$("#belowSlides").append(t)}}),$("body").on("click","#arrow-left",function(){for(var e=0;e<10;e++){var t=$("#detail-hero-thumbnail .swiper-slide").last();t.remove(),$("#belowSlides").prepend(t)}}),$("body").on("click",".swiper-slide",function(){for(;$(this).attr("id")!=$("#detail-hero .swiper-slide:nth-child(1)").attr("id");)slideRight()}),$("#new_search").click(function(){$("#myModal").css("display","none")}),$("#criteria-header").click(function(){$("#criteria").toggleClass("edit"),$("#q").val(param("q").replace(/\+/g," ")),$("#q").text(param("q").replace(/\+/g," ")),$("#dateRangePicker").val(param("from")),$("#dateRangePickerEnd").val(param("to")),$("#na").find("option:selected").removeAttr("selected"),$("#na option[value="+param("na")+"]").attr("selected","selected"),$("#nroom").find("option:selected").removeAttr("selected"),$("#nroom option[value="+param("nr")+"]").attr("selected","selected"),autocomplete()}),$(".hbox").on("click","li",function(){$(this).siblings().children().removeClass("selected"),$(this).children().addClass("selected"),r=$(this).children().text(),l(),window.scrollTo(0,0)}),$('input[name="filter-price"]').on("change",function(){$('input[name="filter-price"]').not(this).prop("checked",!1),s=$(this).prop("checked")?$(this).val():0,l()}),$('input[name="filter-category"]').on("change",function(){$('input[name="filter-category"]').not(this).prop("checked",!1),i=$(this).prop("checked")?$(this).val():0,l()}),$('input[name="filter-city"]').on("change",function(){$('input[name="filter-city"]').not(this).prop("checked",!1),$(this).prop("checked")?(e=$(this).val(),t=$(this).val()):(e="",t=""),l()}),$('input[name="filter-accomodationtype"]').on("change",function(){$('input[name="filter-accomodationtype"]').not(this).prop("checked",!1),a=$(this).prop("checked")?$(this).val():"hotel",l()}),$("#hotel-sort").on("change",function(){l()}),$("#btn-deselect-all-desktop").click(function(){$('input[type="checkbox"]').prop("checked",!1),e="",t="",i=0,a="hotel",!0,s=0,r=1,l()})});